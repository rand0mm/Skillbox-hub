Задание 1


Цели задания
Научиться применять конструкцию try catch.
Попрактиковаться работать с оператором throw.


Подготовка к выполнению задания
Скачайте папку с материалами к заданию.
Чтобы проверять промежуточные результаты, запускайте локальные тесты с помощью команды npm test.


Что нужно сделать
Скорректируйте код представленных функций так, чтобы автоматические тесты проходили.

Функция calculateDiscount должна выбрасывать ошибку, если её аргументы не числа.
Функция getMarketingPrice не должна выбрасывать ошибку, если в структуре товара нет информации про цены.
Асинхронная функция loadAvatar должна возвращать дефолтную картинку пользователя, а не выбрасывать исключение.


Проверка результата
Для проверки результатов достаточно запустить команду npm test, она должна завершиться без ошибок.



Критерии оценки
Конструкция try catch и оператор throw используются правильно. Автоматические тесты проходят успешно.



Рекомендации по выполнению
Во время выполнения задания можно запустить автоматические тесты с помощью команды npm run test:watch. В данном режиме тесты сразу будут реагировать на ваши корректировки. Это позволит следить за изменением статуса каждого из тестов во время корректировки реализации функции.



Задание 2


Цели задания
Отработать подходы к обработке ошибок в асинхронном коде при взаимодействии с API.
Попрактиковаться работать с DOM.


Подготовка к выполнению задания
При выполнении задания используйте локальный Node.js-сервер, он доступен по адресу localhost:3000.
Скачайте папку с материалами к заданию. В папке выполните команду n npm start.
Код решения напишите в папке client.


Что нужно сделать
Отобразите каталог товаров. В случаях, когда при загрузке товаров произошла ошибка, вернулся невалидный JSON или сервер вернул неуспешный статус ответа, отобразите оповещение для пользователя.

После запуска локального сервера данные, необходимые для отображения списка товаров, следует загрузить из источника /api/products, он с рандомной вероятностью возвращает разный статус ответа и данные. Это сделано для имитации нестабильной работы сервера.

Для удобства выполнения задания можно передать два query-параметра:

    1. status — задаёт конкретный статус ответа сервера, например:

/api/products?status=500 всегда вернёт 500 статус и поле error с текстом ошибки,
/api/products?status=200 всегда вернёт 200 статус и в data массив товаров.
    2. json_invalid — если установить этот параметр, вернётся невалидный JSON:

/api/products?json_invalid=true


При решении задания реализуйте следующее:

Отобразите список товаров. Для элемента списка отобразите картинку, название товара, цену, основываясь на полях image, name, price объекта товара.
Напишите код, который будет отображать информационный блок в правом нижнем углу браузера. По истечении трёх секунд блок должен пропадать. Этот блок будет использоваться для оповещения пользователя о том, что в приложении произошла ошибка. Предусмотрите, что на странице одновременно могут отображаться несколько блоков.
Во время запроса списка товаров отобразите лоудер/индикатор запроса. По завершении запроса скройте этот блок вне зависимости от того, успешно завершился запрос или произошла ошибка.
Обработайте ситуацию, когда сервер вернул невалидный JSON. Отобразите информационный блок с текстом «Произошла ошибка, попробуйте обновить страницу позже».
Обработайте сетевую ошибку. Отобразите информационный блок с текстом «Произошла ошибка, проверьте подключение к интернету».
Если сервер возвращает пустой список товаров и 404 статус ответа вместо списка товаров, отобразите заголовок с текстом «Список товаров пуст».
Если сервер возвращает 500 статус ответа, повторите запрос два раза. Если по истечении повторных запросов статус не поменялся, отобразите сообщение для пользователя: «Произошла ошибка, попробуйте обновить страницу позже».


Дополнительно
Добавьте появление информационного блока во время изменения статуса сетевого подключения. Для этого нужно добавить обработчик на онлайн- и офлайн-события на объекте window.

Подробнее с возможностями обработчика можно ознакомиться по ссылке.



Рекомендации к выполнению
Чтобы обработать ситуацию с сетевой ошибкой, можно воспользоваться chrome dev tools и вкладкой network, переключить браузер в офлайн-режим.
Если захотите дальше поэкспериментировать с серверным кодом, не забудьте после изменения в файле server.js перезапустить сервер с помощью команды npm start.
Для реализации задания не обязательно писать все стили с нуля. Можно воспользоваться любым CSS-фреймворком, например bootstrap.



комментарии: самое главное понять где удобнее проводить валидацию данных.
